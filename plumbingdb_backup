--
-- PostgreSQL database dump
--

-- Dumped from database version 9.5.12
-- Dumped by pg_dump version 9.5.12

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


--
-- Name: addassign(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.addassign(tic integer, emp integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
insert into did_work
(ticket_id, employee_id)
values (tic, emp);
end;
$$;


ALTER FUNCTION public.addassign(tic integer, emp integer) OWNER TO postgres;

--
-- Name: addinvoice(character varying, integer, numeric, integer, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.addinvoice(inv character varying, tic_id integer, total numeric, pay_id integer, des character varying) RETURNS integer
    LANGUAGE plpgsql
    AS $$
declare tmpnum varchar(10);
begin
insert into invoice
(invoice_number, ticket_id, invoice_total,
pay_method_id, invoice_desc)
values (inv, tic_id, total, pay_id, des)
on conflict (invoice_number) do update
set invoice_total = total, 
pay_method_id = pay_id,
invoice_desc = des returning invoice_number into tmpnum; 
return tmpnum; end; $$;


ALTER FUNCTION public.addinvoice(inv character varying, tic_id integer, total numeric, pay_id integer, des character varying) OWNER TO postgres;

--
-- Name: addticket(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.addticket(loc integer, prob integer) RETURNS integer
    LANGUAGE plpgsql
    AS $$
declare tmpid int; begin
insert into ticket 
(location_id, problem_id)
values (loc, prob) returning ticket_id into tmpid; return tmpid; end;
$$;


ALTER FUNCTION public.addticket(loc integer, prob integer) OWNER TO postgres;

--
-- Name: addticket(integer, integer, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.addticket(loc integer, prob integer, e timestamp without time zone) RETURNS integer
    LANGUAGE plpgsql
    AS $$
declare tmpid int; begin
insert into ticket (location_id, problem_id, eta)
values (loc, prob, e) returning ticket_id into tmpid;
return tmpid; end; $$;


ALTER FUNCTION public.addticket(loc integer, prob integer, e timestamp without time zone) OWNER TO postgres;

--
-- Name: check_in(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.check_in(id integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
update did_work
set start_time = now()
where ticket_id = id;
end; $$;


ALTER FUNCTION public.check_in(id integer) OWNER TO postgres;

--
-- Name: check_out(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.check_out(id integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
update did_work
set end_time = now()
where ticket_id = id;
end; $$;


ALTER FUNCTION public.check_out(id integer) OWNER TO postgres;

--
-- Name: delete_assigned(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.delete_assigned(id integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
delete from did_work
where did_work.ticket_id = id;
end; $$;


ALTER FUNCTION public.delete_assigned(id integer) OWNER TO postgres;

--
-- Name: deleteinvoice(character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.deleteinvoice(id character varying) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
delete from invoice
where invoice_number = id;
end;
$$;


ALTER FUNCTION public.deleteinvoice(id character varying) OWNER TO postgres;

--
-- Name: deleteticket(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.deleteticket(id integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
delete from ticket 
where ticket_id = id;
end;
$$;


ALTER FUNCTION public.deleteticket(id integer) OWNER TO postgres;

--
-- Name: get_invoice_info(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_invoice_info(id integer) RETURNS TABLE(first_name character varying, last_name character varying, address character varying, city character varying, zipcode character varying, fname character varying, lname character varying, work_type character varying, start_time text, end_time text)
    LANGUAGE plpgsql
    AS $$ 
begin 
return query 
select 
 customer.first_name, customer.last_name, location.address, area.city, 
 area.zipcode, employee.fname, employee.lname, problem.work_type, 
 to_char(did_work.start_time, 'HH12:MI AM MM/DD/YY'::text), 
 to_char(did_work.end_time, 'HH12:MI AM MM/DD/YY'::text)
from ticket natural join location natural join customer natural join area
 natural join problem natural join did_work inner join employee
 on did_work.employee_id = employee.employee_id
where ticket_id = id;
 end; $$;


ALTER FUNCTION public.get_invoice_info(id integer) OWNER TO postgres;

--
-- Name: get_invoice_info_full(character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_invoice_info_full(id character varying) RETURNS TABLE(tot numeric, paymeth integer, des character varying)
    LANGUAGE plpgsql
    AS $$
begin
return query
select
invoice.invoice_total,
invoice.pay_method_id,
invoice.invoice_desc
from invoice
where invoice.invoice_number = id;
end; $$;


ALTER FUNCTION public.get_invoice_info_full(id character varying) OWNER TO postgres;

--
-- Name: get_locations(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_locations(cust integer) RETURNS TABLE(loc_id integer, addr character varying, zip character varying, city character varying, state character varying)
    LANGUAGE plpgsql
    AS $$
BEGIN
 return query select
 location_id, address, zipcode, area.city, area.state
from location natural join customer natural join area
where customer_id = cust;
END; $$;


ALTER FUNCTION public.get_locations(cust integer) OWNER TO postgres;

--
-- Name: get_status(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_status(id integer) RETURNS character varying
    LANGUAGE plpgsql
    AS $$
declare stat varchar; 
begin
select ticket.status into stat from ticket
where ticket.ticket_id = id;
return stat;
end; $$;


ALTER FUNCTION public.get_status(id integer) OWNER TO postgres;

--
-- Name: get_tech(character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_tech(id character varying) RETURNS character varying
    LANGUAGE plpgsql
    AS $$
declare name varchar;
begin
select employee.fname || ' ' || employee.lname
into name from invoice natural join ticket
natural join did_work natural join employee
where invoice.invoice_number = id;
return name; end; $$;


ALTER FUNCTION public.get_tech(id character varying) OWNER TO postgres;

--
-- Name: get_ticket_from_invoice(character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_ticket_from_invoice(id character varying) RETURNS integer
    LANGUAGE plpgsql
    AS $$
declare result int;
begin
select invoice.ticket_id into result
from invoice 
where invoice.invoice_number = id;
return result;
end;$$;


ALTER FUNCTION public.get_ticket_from_invoice(id character varying) OWNER TO postgres;

--
-- Name: get_ticket_info(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_ticket_info(id integer) RETURNS TABLE(c_id integer, l_id integer, p_id integer, e_id integer, est timestamp without time zone, stat character varying)
    LANGUAGE plpgsql
    AS $$
begin
return query select
customer_id, location_id, problem_id, employee_id,
eta, status
from ticket natural join location natural join customer 
natural join problem left join did_work
on did_work.ticket_id = ticket.ticket_id
where ticket.ticket_id = id;
end; $$;


ALTER FUNCTION public.get_ticket_info(id integer) OWNER TO postgres;

--
-- Name: getreceived(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.getreceived(id integer) RETURNS text
    LANGUAGE plpgsql
    AS $$
declare tmptime text;
begin
select to_char(received, 'HH12:MI AM MM/DD/YY'::text) into tmptime
from ticket
where ticket_id = id; return tmptime;
end; $$;


ALTER FUNCTION public.getreceived(id integer) OWNER TO postgres;

--
-- Name: invoice_in_date(character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.invoice_in_date(id character varying, begin character varying, ending character varying) RETURNS integer
    LANGUAGE plpgsql
    AS $$
declare exists integer;
begin
select count("invoice_number") into exists
from invoice natural join ticket natural join did_work
where invoice.invoice_number = id and
did_work.end_time between begin::timestamp and
ending::timestamp;
return exists; end; $$;


ALTER FUNCTION public.invoice_in_date(id character varying, begin character varying, ending character varying) OWNER TO postgres;

--
-- Name: set_status(integer, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.set_status(id integer, stat character varying) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
update ticket
set status = stat
where ticket_id = id;
end; $$;


ALTER FUNCTION public.set_status(id integer, stat character varying) OWNER TO postgres;

--
-- Name: updateassign(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.updateassign(tic integer, emp integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
update did_work
set employee_id = emp
where ticket_id = tic;
end; $$;


ALTER FUNCTION public.updateassign(tic integer, emp integer) OWNER TO postgres;

--
-- Name: updateticket(integer, integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.updateticket(id integer, loc integer, prob integer) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
update ticket
set location_id = loc, problem_id = prob
where ticket_id = id;
end; $$;


ALTER FUNCTION public.updateticket(id integer, loc integer, prob integer) OWNER TO postgres;

--
-- Name: updateticket(integer, integer, integer, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.updateticket(id integer, loc integer, prob integer, e timestamp without time zone) RETURNS void
    LANGUAGE plpgsql
    AS $$
begin
update ticket
set location_id = loc, problem_id = prob, eta = e
where ticket_id = id;
end; $$;


ALTER FUNCTION public.updateticket(id integer, loc integer, prob integer, e timestamp without time zone) OWNER TO postgres;

SET default_tablespace = data;

SET default_with_oids = false;

--
-- Name: area; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.area (
    zipcode character varying(5) NOT NULL,
    city character varying(50),
    state character varying(2)
);


ALTER TABLE public.area OWNER TO postgres;

--
-- Name: billing_address; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.billing_address (
    customer_id integer NOT NULL,
    location_id integer NOT NULL
);


ALTER TABLE public.billing_address OWNER TO postgres;

--
-- Name: customer; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.customer (
    customer_id integer NOT NULL,
    first_name character varying(35) NOT NULL,
    last_name character varying(35) NOT NULL,
    phone character varying(10)
);


ALTER TABLE public.customer OWNER TO postgres;

--
-- Name: customer_customer_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.customer_customer_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.customer_customer_id_seq OWNER TO postgres;

--
-- Name: customer_customer_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.customer_customer_id_seq OWNED BY public.customer.customer_id;


--
-- Name: customer_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.customer_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.customer_id_seq OWNER TO postgres;

--
-- Name: customerview; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.customerview AS
 SELECT customer.customer_id,
    customer.first_name,
    customer.last_name
   FROM public.customer
  ORDER BY customer.last_name;


ALTER TABLE public.customerview OWNER TO postgres;

--
-- Name: did_work; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.did_work (
    ticket_id integer NOT NULL,
    employee_id integer NOT NULL,
    start_time timestamp without time zone,
    end_time timestamp without time zone
);


ALTER TABLE public.did_work OWNER TO postgres;

--
-- Name: employee; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.employee (
    employee_id integer NOT NULL,
    fname character varying(35) NOT NULL,
    lname character varying(35) NOT NULL,
    phone character varying(10),
    active boolean NOT NULL
);


ALTER TABLE public.employee OWNER TO postgres;

--
-- Name: employee_employee_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.employee_employee_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.employee_employee_id_seq OWNER TO postgres;

--
-- Name: employee_employee_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.employee_employee_id_seq OWNED BY public.employee.employee_id;


--
-- Name: employee_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.employee_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.employee_id_seq OWNER TO postgres;

SET default_tablespace = '';

--
-- Name: id; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.id (
    last_value bigint
);


ALTER TABLE public.id OWNER TO postgres;

SET default_tablespace = data;

--
-- Name: invoice; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.invoice (
    invoice_number character varying(10) NOT NULL,
    ticket_id integer NOT NULL,
    invoice_total numeric(10,2) NOT NULL,
    pay_method_id integer,
    invoice_desc character varying(200)
);


ALTER TABLE public.invoice OWNER TO postgres;

--
-- Name: location; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.location (
    location_id integer NOT NULL,
    customer_id integer NOT NULL,
    address character varying(50) NOT NULL,
    zipcode character varying(5) NOT NULL
);


ALTER TABLE public.location OWNER TO postgres;

--
-- Name: ticket; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.ticket (
    ticket_id integer NOT NULL,
    location_id integer NOT NULL,
    problem_id integer NOT NULL,
    eta timestamp without time zone,
    status character varying(15) DEFAULT 'Unassigned'::character varying,
    received timestamp without time zone DEFAULT now()
);


ALTER TABLE public.ticket OWNER TO postgres;

--
-- Name: invoiceview; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.invoiceview AS
 SELECT customer.first_name,
    customer.last_name,
    invoice.invoice_number,
    to_char(did_work.end_time, 'MM/DD/YY'::text) AS date,
    invoice.invoice_total
   FROM ((((public.invoice
     JOIN public.ticket USING (ticket_id))
     JOIN public.location USING (location_id))
     JOIN public.customer USING (customer_id))
     JOIN public.did_work USING (ticket_id));


ALTER TABLE public.invoiceview OWNER TO postgres;

--
-- Name: item_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.item_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.item_id_seq OWNER TO postgres;

--
-- Name: location_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.location_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.location_id_seq OWNER TO postgres;

--
-- Name: location_location_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.location_location_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.location_location_id_seq OWNER TO postgres;

--
-- Name: location_location_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.location_location_id_seq OWNED BY public.location.location_id;


--
-- Name: non_comm_item; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.non_comm_item (
    item_id integer NOT NULL,
    item_desc character varying(100),
    item_amount numeric(10,2)
);


ALTER TABLE public.non_comm_item OWNER TO postgres;

--
-- Name: non_comm_item_item_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.non_comm_item_item_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.non_comm_item_item_id_seq OWNER TO postgres;

--
-- Name: non_comm_item_item_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.non_comm_item_item_id_seq OWNED BY public.non_comm_item.item_id;


--
-- Name: problem; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.problem (
    problem_id integer NOT NULL,
    work_type character varying(50)
);


ALTER TABLE public.problem OWNER TO postgres;

--
-- Name: openticketview; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.openticketview AS
 SELECT ticket.ticket_id,
    location.address,
    customer.first_name,
    customer.last_name,
    problem.work_type,
    to_char(ticket.received, 'HH12:MI AM MM/DD/YY'::text) AS received,
    to_char(ticket.eta, 'HH12:MI AM MM/DD/YY'::text) AS eta,
    ticket.status,
    employee.fname,
    employee.lname
   FROM (((((public.ticket
     JOIN public.location USING (location_id))
     JOIN public.customer USING (customer_id))
     JOIN public.problem USING (problem_id))
     LEFT JOIN public.did_work ON ((ticket.ticket_id = did_work.ticket_id)))
     LEFT JOIN public.employee ON ((did_work.employee_id = employee.employee_id)))
  WHERE ((ticket.status)::text <> 'Closed'::text);


ALTER TABLE public.openticketview OWNER TO postgres;

--
-- Name: parts_used; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.parts_used (
    ticket_id integer NOT NULL,
    item_id integer NOT NULL
);


ALTER TABLE public.parts_used OWNER TO postgres;

--
-- Name: pay_method_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.pay_method_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.pay_method_id_seq OWNER TO postgres;

--
-- Name: payment_method; Type: TABLE; Schema: public; Owner: postgres; Tablespace: data
--

CREATE TABLE public.payment_method (
    pay_method_id integer NOT NULL,
    payment_type character varying(50) NOT NULL
);


ALTER TABLE public.payment_method OWNER TO postgres;

--
-- Name: payment_method_pay_method_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.payment_method_pay_method_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.payment_method_pay_method_id_seq OWNER TO postgres;

--
-- Name: payment_method_pay_method_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.payment_method_pay_method_id_seq OWNED BY public.payment_method.pay_method_id;


--
-- Name: problem_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.problem_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.problem_id_seq OWNER TO postgres;

--
-- Name: problem_problem_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.problem_problem_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.problem_problem_id_seq OWNER TO postgres;

--
-- Name: problem_problem_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.problem_problem_id_seq OWNED BY public.problem.problem_id;


--
-- Name: problemview; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.problemview AS
 SELECT problem.problem_id,
    problem.work_type
   FROM public.problem;


ALTER TABLE public.problemview OWNER TO postgres;

--
-- Name: recentinvoiceview; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.recentinvoiceview AS
 SELECT invoice.invoice_number
   FROM ((public.invoice
     JOIN public.ticket USING (ticket_id))
     JOIN public.did_work USING (ticket_id))
  ORDER BY did_work.end_time DESC
 LIMIT 20;


ALTER TABLE public.recentinvoiceview OWNER TO postgres;

--
-- Name: technicianview; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.technicianview AS
 SELECT employee.employee_id,
    employee.fname,
    employee.lname
   FROM public.employee;


ALTER TABLE public.technicianview OWNER TO postgres;

--
-- Name: ticket_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.ticket_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.ticket_id_seq OWNER TO postgres;

--
-- Name: ticket_ticket_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.ticket_ticket_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.ticket_ticket_id_seq OWNER TO postgres;

--
-- Name: ticket_ticket_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.ticket_ticket_id_seq OWNED BY public.ticket.ticket_id;


--
-- Name: customer_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.customer ALTER COLUMN customer_id SET DEFAULT nextval('public.customer_customer_id_seq'::regclass);


--
-- Name: employee_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee ALTER COLUMN employee_id SET DEFAULT nextval('public.employee_employee_id_seq'::regclass);


--
-- Name: location_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.location ALTER COLUMN location_id SET DEFAULT nextval('public.location_location_id_seq'::regclass);


--
-- Name: item_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.non_comm_item ALTER COLUMN item_id SET DEFAULT nextval('public.non_comm_item_item_id_seq'::regclass);


--
-- Name: pay_method_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payment_method ALTER COLUMN pay_method_id SET DEFAULT nextval('public.payment_method_pay_method_id_seq'::regclass);


--
-- Name: problem_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.problem ALTER COLUMN problem_id SET DEFAULT nextval('public.problem_problem_id_seq'::regclass);


--
-- Name: ticket_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket ALTER COLUMN ticket_id SET DEFAULT nextval('public.ticket_ticket_id_seq'::regclass);


--
-- Data for Name: area; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.area (zipcode, city, state) FROM stdin;
93309	Bakersfield	CA
93307	Bakersfield	CA
93308	Bakersfield	CA
93311	Bakersfield	CA
93312	Bakersfield	CA
93313	Bakersfield	CA
93314	Bakersfield	CA
\.


--
-- Data for Name: billing_address; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.billing_address (customer_id, location_id) FROM stdin;
\.


--
-- Data for Name: customer; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.customer (customer_id, first_name, last_name, phone) FROM stdin;
3	Robert	Baratheon	6618374939
7	Ned	Stark	6613839283
9	Khal	Drogo	6615738493
10	Tyrion	Lannister	6614739273
11	Daenerys	Targaryen	6613375838
6	Joffrey	Baratheon	6614894829
5	Sandor	Clegane	6613982938
4	Arya	Stark	6619938473
2	Petyr	Baelish	6613235628
1	Margaery	Tyrell	6613338395
12	Roose	Bolton	6612837193
\.


--
-- Name: customer_customer_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.customer_customer_id_seq', 12, true);


--
-- Name: customer_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.customer_id_seq', 1, false);


--
-- Data for Name: did_work; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.did_work (ticket_id, employee_id, start_time, end_time) FROM stdin;
78	3	2018-05-14 19:56:28.583454	2018-05-14 19:56:30.374662
10	4	2018-05-14 20:48:35.890776	2018-05-14 20:48:40.37478
66	3	2018-05-14 16:29:07.569567	2018-04-05 12:12:12
84	5	2018-05-14 22:26:33.366951	2018-05-14 22:26:35.922487
\.


--
-- Data for Name: employee; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.employee (employee_id, fname, lname, phone, active) FROM stdin;
1	Chris	Park	6613329384	t
2	Samus	Aran	6613928395	t
3	Master	Chief	6618395838	t
4	Chris	Redfield	6616839828	t
5	Claire	Redfield	6613758393	t
\.


--
-- Name: employee_employee_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.employee_employee_id_seq', 5, true);


--
-- Name: employee_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.employee_id_seq', 1, true);


--
-- Data for Name: id; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.id (last_value) FROM stdin;
\.


--
-- Data for Name: invoice; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.invoice (invoice_number, ticket_id, invoice_total, pay_method_id, invoice_desc) FROM stdin;
10001	10	100.99	5	etstdklafjlsdk
80003	66	127.51	3	Repaired Mainline
93483	78	100.22	5	Install moen faucet
19	84	101.10	5	repaired faucet leaking
\.


--
-- Name: item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.item_id_seq', 1, false);


--
-- Data for Name: location; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.location (location_id, customer_id, address, zipcode) FROM stdin;
1	1	12312 Jensen Dr.	93309
2	1	512 Washington st	93309
4	6	5448 Main St	93313
5	5	1337 Center Ave	93308
6	6	245 Raven Dr	93311
7	4	9115 Market St	93312
8	2	128 Charles Ct	93309
9	3	4444 Water Canyon blvd	93306
\.


--
-- Name: location_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.location_id_seq', 1, false);


--
-- Name: location_location_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.location_location_id_seq', 9, true);


--
-- Data for Name: non_comm_item; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.non_comm_item (item_id, item_desc, item_amount) FROM stdin;
\.


--
-- Name: non_comm_item_item_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.non_comm_item_item_id_seq', 1, false);


--
-- Data for Name: parts_used; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.parts_used (ticket_id, item_id) FROM stdin;
\.


--
-- Name: pay_method_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.pay_method_id_seq', 1, false);


--
-- Data for Name: payment_method; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.payment_method (pay_method_id, payment_type) FROM stdin;
1	Cash
2	Check
3	Credit Card
4	E-Check
5	Charge
\.


--
-- Name: payment_method_pay_method_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.payment_method_pay_method_id_seq', 5, true);


--
-- Data for Name: problem; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.problem (problem_id, work_type) FROM stdin;
1	Mainline
2	Water Leak
3	Water Heater
4	Bath Tub
5	Faucet
6	Shower
7	Gas Line
\.


--
-- Name: problem_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.problem_id_seq', 1, false);


--
-- Name: problem_problem_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.problem_problem_id_seq', 7, true);


--
-- Data for Name: ticket; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ticket (ticket_id, location_id, problem_id, eta, status, received) FROM stdin;
66	7	1	2018-10-11 05:05:12	Closed	2018-05-12 17:22:20.583773
78	2	5	\N	Closed	2018-05-13 13:48:38.483839
84	5	5	\N	Closed	2018-05-14 22:26:27.587187
10	6	5	\N	Closed	2018-05-06 15:19:08.798049
\.


--
-- Name: ticket_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ticket_id_seq', 1, true);


--
-- Name: ticket_ticket_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ticket_ticket_id_seq', 84, true);


SET default_tablespace = '';

--
-- Name: area_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.area
    ADD CONSTRAINT area_pkey PRIMARY KEY (zipcode);


--
-- Name: billing_address_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.billing_address
    ADD CONSTRAINT billing_address_pkey PRIMARY KEY (customer_id, location_id);


--
-- Name: customer_phone_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.customer
    ADD CONSTRAINT customer_phone_key UNIQUE (phone);


--
-- Name: customer_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.customer
    ADD CONSTRAINT customer_pkey PRIMARY KEY (customer_id);


--
-- Name: employee_phone_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee
    ADD CONSTRAINT employee_phone_key UNIQUE (phone);


--
-- Name: employee_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee
    ADD CONSTRAINT employee_pkey PRIMARY KEY (employee_id);


--
-- Name: invoice_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.invoice
    ADD CONSTRAINT invoice_pkey PRIMARY KEY (invoice_number);


--
-- Name: location_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.location
    ADD CONSTRAINT location_pkey PRIMARY KEY (location_id);


--
-- Name: non_comm_item_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.non_comm_item
    ADD CONSTRAINT non_comm_item_pkey PRIMARY KEY (item_id);


--
-- Name: parts_used_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parts_used
    ADD CONSTRAINT parts_used_pkey PRIMARY KEY (ticket_id, item_id);


--
-- Name: payment_method_payment_type_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payment_method
    ADD CONSTRAINT payment_method_payment_type_key UNIQUE (payment_type);


--
-- Name: payment_method_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payment_method
    ADD CONSTRAINT payment_method_pkey PRIMARY KEY (pay_method_id);


--
-- Name: problem_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.problem
    ADD CONSTRAINT problem_pkey PRIMARY KEY (problem_id);


--
-- Name: problem_work_type_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.problem
    ADD CONSTRAINT problem_work_type_key UNIQUE (work_type);


--
-- Name: ticket_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_pkey PRIMARY KEY (ticket_id);


--
-- Name: billing_address_customer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.billing_address
    ADD CONSTRAINT billing_address_customer_id_fkey FOREIGN KEY (customer_id) REFERENCES public.customer(customer_id);


--
-- Name: billing_address_location_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.billing_address
    ADD CONSTRAINT billing_address_location_id_fkey FOREIGN KEY (location_id) REFERENCES public.location(location_id);


--
-- Name: did_work_employee_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.did_work
    ADD CONSTRAINT did_work_employee_id_fkey FOREIGN KEY (employee_id) REFERENCES public.employee(employee_id);


--
-- Name: did_work_ticket_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.did_work
    ADD CONSTRAINT did_work_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.ticket(ticket_id);


--
-- Name: invoice_pay_method_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.invoice
    ADD CONSTRAINT invoice_pay_method_id_fkey FOREIGN KEY (pay_method_id) REFERENCES public.payment_method(pay_method_id);


--
-- Name: invoice_ticket_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.invoice
    ADD CONSTRAINT invoice_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.ticket(ticket_id);


--
-- Name: location_customer_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.location
    ADD CONSTRAINT location_customer_id_fkey FOREIGN KEY (customer_id) REFERENCES public.customer(customer_id);


--
-- Name: parts_used_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parts_used
    ADD CONSTRAINT parts_used_item_id_fkey FOREIGN KEY (item_id) REFERENCES public.non_comm_item(item_id);


--
-- Name: parts_used_ticket_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parts_used
    ADD CONSTRAINT parts_used_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.ticket(ticket_id);


--
-- Name: ticket_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.did_work
    ADD CONSTRAINT ticket_id FOREIGN KEY (ticket_id) REFERENCES public.ticket(ticket_id) ON DELETE CASCADE;


--
-- Name: ticket_location_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_location_id_fkey FOREIGN KEY (location_id) REFERENCES public.location(location_id);


--
-- Name: ticket_problem_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_problem_id_fkey FOREIGN KEY (problem_id) REFERENCES public.problem(problem_id);


--
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- Name: TABLE area; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.area FROM PUBLIC;
REVOKE ALL ON TABLE public.area FROM postgres;
GRANT ALL ON TABLE public.area TO postgres;
GRANT ALL ON TABLE public.area TO plumbingdb;


--
-- Name: TABLE billing_address; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.billing_address FROM PUBLIC;
REVOKE ALL ON TABLE public.billing_address FROM postgres;
GRANT ALL ON TABLE public.billing_address TO postgres;
GRANT ALL ON TABLE public.billing_address TO plumbingdb;


--
-- Name: TABLE customer; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.customer FROM PUBLIC;
REVOKE ALL ON TABLE public.customer FROM postgres;
GRANT ALL ON TABLE public.customer TO postgres;
GRANT ALL ON TABLE public.customer TO plumbingdb;


--
-- Name: SEQUENCE customer_customer_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.customer_customer_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.customer_customer_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.customer_customer_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.customer_customer_id_seq TO plumbingdb;


--
-- Name: SEQUENCE customer_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.customer_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.customer_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.customer_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.customer_id_seq TO plumbingdb;


--
-- Name: TABLE customerview; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.customerview FROM PUBLIC;
REVOKE ALL ON TABLE public.customerview FROM postgres;
GRANT ALL ON TABLE public.customerview TO postgres;
GRANT ALL ON TABLE public.customerview TO plumbingdb;


--
-- Name: TABLE did_work; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.did_work FROM PUBLIC;
REVOKE ALL ON TABLE public.did_work FROM postgres;
GRANT ALL ON TABLE public.did_work TO postgres;
GRANT ALL ON TABLE public.did_work TO plumbingdb;


--
-- Name: TABLE employee; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.employee FROM PUBLIC;
REVOKE ALL ON TABLE public.employee FROM postgres;
GRANT ALL ON TABLE public.employee TO postgres;
GRANT ALL ON TABLE public.employee TO plumbingdb;


--
-- Name: SEQUENCE employee_employee_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.employee_employee_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.employee_employee_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.employee_employee_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.employee_employee_id_seq TO plumbingdb;


--
-- Name: SEQUENCE employee_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.employee_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.employee_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.employee_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.employee_id_seq TO plumbingdb;


--
-- Name: TABLE id; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.id FROM PUBLIC;
REVOKE ALL ON TABLE public.id FROM postgres;
GRANT ALL ON TABLE public.id TO postgres;
GRANT ALL ON TABLE public.id TO plumbingdb;


--
-- Name: TABLE invoice; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.invoice FROM PUBLIC;
REVOKE ALL ON TABLE public.invoice FROM postgres;
GRANT ALL ON TABLE public.invoice TO postgres;
GRANT ALL ON TABLE public.invoice TO plumbingdb;


--
-- Name: TABLE location; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.location FROM PUBLIC;
REVOKE ALL ON TABLE public.location FROM postgres;
GRANT ALL ON TABLE public.location TO postgres;
GRANT ALL ON TABLE public.location TO plumbingdb;


--
-- Name: TABLE ticket; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.ticket FROM PUBLIC;
REVOKE ALL ON TABLE public.ticket FROM postgres;
GRANT ALL ON TABLE public.ticket TO postgres;
GRANT ALL ON TABLE public.ticket TO plumbingdb;


--
-- Name: TABLE invoiceview; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.invoiceview FROM PUBLIC;
REVOKE ALL ON TABLE public.invoiceview FROM postgres;
GRANT ALL ON TABLE public.invoiceview TO postgres;
GRANT ALL ON TABLE public.invoiceview TO plumbingdb;


--
-- Name: SEQUENCE item_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.item_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.item_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.item_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.item_id_seq TO plumbingdb;


--
-- Name: SEQUENCE location_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.location_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.location_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.location_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.location_id_seq TO plumbingdb;


--
-- Name: SEQUENCE location_location_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.location_location_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.location_location_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.location_location_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.location_location_id_seq TO plumbingdb;


--
-- Name: TABLE non_comm_item; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.non_comm_item FROM PUBLIC;
REVOKE ALL ON TABLE public.non_comm_item FROM postgres;
GRANT ALL ON TABLE public.non_comm_item TO postgres;
GRANT ALL ON TABLE public.non_comm_item TO plumbingdb;


--
-- Name: SEQUENCE non_comm_item_item_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.non_comm_item_item_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.non_comm_item_item_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.non_comm_item_item_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.non_comm_item_item_id_seq TO plumbingdb;


--
-- Name: TABLE problem; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.problem FROM PUBLIC;
REVOKE ALL ON TABLE public.problem FROM postgres;
GRANT ALL ON TABLE public.problem TO postgres;
GRANT ALL ON TABLE public.problem TO plumbingdb;


--
-- Name: TABLE openticketview; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.openticketview FROM PUBLIC;
REVOKE ALL ON TABLE public.openticketview FROM postgres;
GRANT ALL ON TABLE public.openticketview TO postgres;
GRANT ALL ON TABLE public.openticketview TO plumbingdb;


--
-- Name: TABLE parts_used; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.parts_used FROM PUBLIC;
REVOKE ALL ON TABLE public.parts_used FROM postgres;
GRANT ALL ON TABLE public.parts_used TO postgres;
GRANT ALL ON TABLE public.parts_used TO plumbingdb;


--
-- Name: SEQUENCE pay_method_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.pay_method_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.pay_method_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.pay_method_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.pay_method_id_seq TO plumbingdb;


--
-- Name: TABLE payment_method; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.payment_method FROM PUBLIC;
REVOKE ALL ON TABLE public.payment_method FROM postgres;
GRANT ALL ON TABLE public.payment_method TO postgres;
GRANT ALL ON TABLE public.payment_method TO plumbingdb;


--
-- Name: SEQUENCE payment_method_pay_method_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.payment_method_pay_method_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.payment_method_pay_method_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.payment_method_pay_method_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.payment_method_pay_method_id_seq TO plumbingdb;


--
-- Name: SEQUENCE problem_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.problem_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.problem_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.problem_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.problem_id_seq TO plumbingdb;


--
-- Name: SEQUENCE problem_problem_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.problem_problem_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.problem_problem_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.problem_problem_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.problem_problem_id_seq TO plumbingdb;


--
-- Name: TABLE problemview; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.problemview FROM PUBLIC;
REVOKE ALL ON TABLE public.problemview FROM postgres;
GRANT ALL ON TABLE public.problemview TO postgres;
GRANT ALL ON TABLE public.problemview TO plumbingdb;


--
-- Name: TABLE recentinvoiceview; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.recentinvoiceview FROM PUBLIC;
REVOKE ALL ON TABLE public.recentinvoiceview FROM postgres;
GRANT ALL ON TABLE public.recentinvoiceview TO postgres;
GRANT ALL ON TABLE public.recentinvoiceview TO plumbingdb;


--
-- Name: TABLE technicianview; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON TABLE public.technicianview FROM PUBLIC;
REVOKE ALL ON TABLE public.technicianview FROM postgres;
GRANT ALL ON TABLE public.technicianview TO postgres;
GRANT ALL ON TABLE public.technicianview TO plumbingdb;


--
-- Name: SEQUENCE ticket_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.ticket_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.ticket_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.ticket_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.ticket_id_seq TO plumbingdb;


--
-- Name: SEQUENCE ticket_ticket_id_seq; Type: ACL; Schema: public; Owner: postgres
--

REVOKE ALL ON SEQUENCE public.ticket_ticket_id_seq FROM PUBLIC;
REVOKE ALL ON SEQUENCE public.ticket_ticket_id_seq FROM postgres;
GRANT ALL ON SEQUENCE public.ticket_ticket_id_seq TO postgres;
GRANT SELECT,USAGE ON SEQUENCE public.ticket_ticket_id_seq TO plumbingdb;


--
-- PostgreSQL database dump complete
--

